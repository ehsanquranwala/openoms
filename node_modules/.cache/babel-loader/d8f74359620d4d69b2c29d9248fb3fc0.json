{"ast":null,"code":"import _classCallCheck from\"C:/Users/nms/Desktop/fish/cowmandi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/nms/Desktop/fish/cowmandi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/nms/Desktop/fish/cowmandi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/nms/Desktop/fish/cowmandi/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Button,Card,CardBody,CardHeader,Container,Row,Col,Input,FormGroup,Label}from'reactstrap';import{Link,Redirect}from\"react-router-dom\";import SecureLS from'secure-ls';import{connect}from\"react-redux\";import{products,addtocart,category,addArticle,user,selectProduct,userdetail}from\"../js/actions/index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ls=new SecureLS({encodingType:'aes'});var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.handleSubmit=function(){var _this$state=_this.state,username=_this$state.username,password=_this$state.password;if(username!=''&&password!=''){var formData=new FormData();formData.append('username',username);formData.append('password',password);//fetch('https://blog.weeklyfishclub.com/wp-json/jwt-auth/v1/token',\nfetch(\"https://blog.weeklyfishclub.com/api/user/generate_auth_cookie?email=\".concat(username,\"&password=\").concat(password),{method:'POST'}).then(function(response){return response.json();}).then(function(json){console.log(json);if(json.status=='ok'){_this.props.Adduser(json);_this.getUserDetail(json.user.id);// \n}else{alert(json.error);}});}else{alert(\"Username or Password empty\");}};_this.state={username:'',password:'',email:'',navigate:false,admin:false};return _this;}_createClass(Login,[{key:\"getUserDetail\",value:function getUserDetail(id){var _this2=this;fetch(\"https://blog.weeklyfishclub.com/wp-json/wc/v3/customers/\".concat(id),{method:'GET',headers:{'Authorization':'Basic '+btoa('ck_1c32b3a20592d8658aa6f72350f7843f6e40acce:cs_10dd1b3cf0344130871395eb03936cb5dee5af0c')}}).then(function(response){return response.json();}).then(function(json){if(json.id){_this2.props.Adduserdetail(json);_this2.setState({navigate:true});}else{}});}},{key:\"render\",value:function render(){var _this3=this;var _this$state2=this.state,navigate=_this$state2.navigate,admin=_this$state2.admin;if(navigate){return/*#__PURE__*/_jsx(Redirect,{to:\"/\",push:true});}return/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'5%'},children:/*#__PURE__*/_jsx(Container,{className:\"themed-container\",fluid:\"sm\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"4\"}),/*#__PURE__*/_jsx(Col,{md:\"4\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:\"Login\"}),/*#__PURE__*/_jsxs(CardBody,{style:{backgroundColor:\"#006994\"},children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"UserID\",children:\"Enter Phone\"}),/*#__PURE__*/_jsx(Input,{name:\"id\",placeholder:\"Enter Phone\",value:this.state.username,onChange:function onChange(e){return _this3.setState({username:e.target.value});},required:true})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"Password\",children:\"Enter Password\"}),/*#__PURE__*/_jsx(Input,{name:\"pass\",placeholder:\"Enter Password\",value:this.state.password,onChange:function onChange(e){return _this3.setState({password:e.target.value});},required:true})]}),/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return _this3.handleSubmit();},children:\"Login\"})}),/*#__PURE__*/_jsx(Label,{children:\"OR \"}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"Create an account \"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\" Register\"})]})]})]})})]})})});}}]);return Login;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{Adduser:function Adduser(json){dispatch(user(json));},Adduserdetail:function Adduserdetail(json){dispatch(userdetail(json));}};};export default connect(mapStateToProps,mapDispatchToProps)(Login);","map":{"version":3,"sources":["C:/Users/nms/Desktop/fish/cowmandi/src/components/Login.js"],"names":["React","Button","Card","CardBody","CardHeader","Container","Row","Col","Input","FormGroup","Label","Link","Redirect","SecureLS","connect","products","addtocart","category","addArticle","user","selectProduct","userdetail","ls","encodingType","Login","props","handleSubmit","state","username","password","formData","FormData","append","fetch","method","then","response","json","console","log","status","Adduser","getUserDetail","id","alert","error","email","navigate","admin","headers","btoa","Adduserdetail","setState","marginTop","backgroundColor","e","target","value","Component","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Button,Card, CardBody, CardHeader,Container,Row,Col,Input,FormGroup,Label,\r\n } from 'reactstrap';\r\n  import {\r\n    Link,\r\n    Redirect\r\n  } from \"react-router-dom\";\r\n  import SecureLS from 'secure-ls';\r\n  \r\n  import { connect } from \"react-redux\";\r\n  import { products, addtocart, category,addArticle,user ,selectProduct, userdetail} from \"../js/actions/index\";\r\n  var ls = new SecureLS({encodingType: 'aes'});\r\n \r\n class Login extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {username:'',\r\n                    password:'',\r\n                    email:'',\r\n                    navigate:false,\r\n                    admin:false};\r\n    }\r\n  getUserDetail(id){\r\n    \r\n  \r\n       fetch(`https://blog.weeklyfishclub.com/wp-json/wc/v3/customers/${id}`,\r\n         {method:'GET', \r\n           headers: {\r\n           'Authorization':'Basic ' + btoa('ck_1c32b3a20592d8658aa6f72350f7843f6e40acce:cs_10dd1b3cf0344130871395eb03936cb5dee5af0c')}})\r\n         .then(response => response.json())\r\n         .then(json => { \r\n           if(json.id){\r\n            this.props.Adduserdetail(json)\r\n           \r\n              this.setState({navigate:true})\r\n            \r\n            } \r\n           else{ \r\n                       } \r\n       });\r\n     \r\n  }\r\n\r\n    handleSubmit=()=>{\r\n      const {username,password}=this.state;\r\n      if(username!='' && password!=''){\r\n      let formData = new FormData();\r\n          formData.append('username',username);\r\n          formData.append('password',password);\r\n      //fetch('https://blog.weeklyfishclub.com/wp-json/jwt-auth/v1/token',\r\n      fetch(`https://blog.weeklyfishclub.com/api/user/generate_auth_cookie?email=${username}&password=${password}`,\r\n      {method:'POST'})\r\n        .then(response => response.json())\r\n        .then(json => { \r\n          console.log(json)\r\n          if(json.status=='ok'){\r\n            this.props.Adduser(json)\r\n            this.getUserDetail(json.user.id)\r\n            \r\n             // \r\n               } else{ alert(json.error)}   });\r\n                        \r\n                }else{alert(\"Username or Password empty\")} \r\n    }\r\n\r\n\r\n    render() {\r\n      const { navigate,admin } = this.state\r\n      if (navigate) {\r\n        return <Redirect to=\"/\" push={true} />\r\n      }\r\n   \r\n      \r\n       return (\r\n          <div style={{marginTop:'5%'}}>\r\n            <Container className=\"themed-container\" fluid=\"sm\" >\r\n              <Row>\r\n              <Col md=\"4\"></Col>\r\n              <Col md=\"4\">\r\n                <Card>\r\n                    <CardHeader>Login</CardHeader>\r\n                    <CardBody style={{backgroundColor: \"#006994\"}}> \r\n                      <FormGroup>\r\n                        <Label for=\"UserID\">Enter Phone</Label>\r\n                        <Input  name='id' placeholder='Enter Phone' value={this.state.username} onChange={ (e)=>this.setState({username: e.target.value})}  required></Input>\r\n                      </FormGroup>\r\n                      <FormGroup>\r\n                        <Label for=\"Password\">Enter Password</Label>\r\n                        <Input  name='pass' placeholder='Enter Password' value={this.state.password} onChange={ (e)=>this.setState({password: e.target.value})} required></Input>\r\n                      </FormGroup> \r\n                      <FormGroup>\r\n                        <Button onClick={()=>this.handleSubmit()}>Login</Button>   \r\n                      </FormGroup>\r\n                      <Label>OR </Label>\r\n                      <FormGroup>\r\n                      <Label>Create an account </Label>\r\n                        <Link to=\"/register\"> Register</Link>\r\n                      </FormGroup>\r\n                      </CardBody>\r\n                 </Card>\r\n                </Col>  \r\n                  </Row>\r\n          </Container>\r\n          </div>\r\n       );\r\n    }\r\n }\r\n\r\n \r\n const mapStateToProps = state => {\r\n  return {\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    Adduser(json) {\r\n    dispatch(user(json));\r\n    },\r\n    Adduserdetail(json) {\r\n      dispatch(userdetail(json));\r\n      }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Login);"]},"metadata":{},"sourceType":"module"}