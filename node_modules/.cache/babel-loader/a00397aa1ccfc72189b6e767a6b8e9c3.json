{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nms\\\\Desktop\\\\fish\\\\openoms\\\\src\\\\components\\\\Home.js\";\nimport React from \"react\";\nimport { Card, CardImg, CardBody, CardTitle, Container, Row, Col, Button } from 'reactstrap';\nimport { Redirect } from \"react-router-dom\";\nimport SecureLS from 'secure-ls';\nimport { connect } from \"react-redux\";\nimport { products, addtocart, category, addArticle, user, selectProduct } from \"../js/actions/index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar ls = new SecureLS({\n  encodingType: 'aes'\n});\n\nvar fishData = require('../assets/fishdata.json');\n\nconst token = ls.get('token');\n\nrequire('dotenv').config();\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      navigate: false\n    };\n  }\n\n  componentDidMount() {\n    console.log(this.props.product);\n    this.getProduct();\n    this.getCategory();\n  }\n\n  loop(json) {\n    let data = [];\n\n    for (var a = 0; a <= json.length - 1; a++) {\n      let tempData1 = [];\n\n      for (var b = 0; b <= json.length - 1; b++) {\n        let tempData2 = [];\n\n        for (var c = 0; c <= json.length - 1; c++) {\n          if (json[b].id == json[c].parent) {\n            tempData2.push({\n              'value': json[c].id,\n              'label': json[c].name\n            });\n            console.log(c, json);\n          }\n        }\n\n        if (json[a].id == json[b].parent) {\n          tempData1.push({\n            'value': json[b].id,\n            'label': json[b].name,\n            'children': tempData2\n          });\n          json.splice(b, 1);\n        }\n      }\n\n      data.push({\n        'value': json[a].id,\n        'label': json[a].name,\n        'children': tempData1\n      });\n    } //console.log(\"category\",data)\n\n\n    this.props.addCategory(data);\n  }\n\n  getProduct() {\n    if (this.props.product.length === 0) {\n      let price_table_data = [];\n      let products = [];\n      let data = new FormData();\n      data.append('post', 'getpurchase');\n      fetch('https://blog.weeklyfishclub.com/api/create_post', {\n        method: 'POST',\n        body: data\n      }).then(response => response.json()).then(json => {\n        if (json[0].length > 0) {\n          price_table_data = json[0];\n        }\n      });\n      fetch('https://blog.weeklyfishclub.com/wp-json/wc/v3/products?per_page=99', {\n        method: 'GET',\n        headers: {\n          'Authorization': 'Basic ' + btoa('ck_1c32b3a20592d8658aa6f72350f7843f6e40acce:cs_10dd1b3cf0344130871395eb03936cb5dee5af0c')\n        }\n      }).then(response => response.json()).then(json => {\n        if (json.length > 0) {\n          for (var i = 0; i <= json.length - 1; i++) {\n            var found = 0;\n            var temp = [];\n            let sum_price = 0;\n            let sum_expense = 0;\n            let sum_retail_base = 0;\n            let sum_retail_percent = 0;\n            let sum_whole_base = 0;\n            let sum_whole_percent = 0;\n            let sum_resale_base = 0;\n            let sum_resale_percent = 0;\n            let sum_special_base = 0;\n            let sum_special_percent = 0;\n\n            for (var a = 0; a <= price_table_data.length - 1; a++) {\n              if (json[i].id == price_table_data[a].product_id) {\n                console.log('price table', price_table_data[a]);\n                sum_price = sum_price + price_table_data[a].purchase_price / price_table_data[a].whole_weight;\n                sum_expense = sum_expense + Number(price_table_data[a].expenses);\n                sum_retail_base = sum_retail_base + Number(price_table_data[a].base_profit_retail);\n                sum_retail_percent = sum_retail_percent + Number(price_table_data[a].price_percent_profit_retail);\n                sum_whole_base = sum_whole_base + Number(price_table_data[a].base_profit_wholesale);\n                sum_whole_percent = sum_whole_percent + Number(price_table_data[a].price_percent_profit_wholesale);\n                sum_resale_base = sum_resale_base + Number(price_table_data[a].base_profit_resale);\n                sum_resale_percent = sum_resale_percent + Number(price_table_data[a].price_percent_profit_resale);\n                sum_special_base = sum_special_base + Number(price_table_data[a].base_profit_special);\n                sum_special_percent = sum_special_percent + Number(price_table_data[a].price_percent_profit_special);\n                temp.push(price_table_data[a]); //    products.push({product:json[i],price:price_table_data[a]})\n\n                found = found + 1;\n              }\n            }\n\n            var filter = {};\n            fishData.map((value, ia) => {\n              if (json[i].sku == fishData[ia].Id) {\n                filter = fishData[ia];\n              }\n            });\n            var coupon = '';\n\n            if (temp.length > 0) {\n              coupon = temp[0].special_price_code;\n            }\n\n            products.push({\n              product: json[i],\n              average: {\n                total_retail_price: sum_price / temp.length + sum_retail_base / temp.length + sum_expense / temp.length + sum_price / temp.length / 100 * sum_retail_percent / temp.length,\n                price: sum_price / temp.length,\n                expense: sum_expense / temp.length,\n                retailbase: sum_retail_base / temp.length,\n                retailpercent: sum_retail_percent / temp.length,\n                wholebase: sum_whole_base / temp.length,\n                wholepercent: sum_whole_percent / temp.length,\n                resalebase: sum_resale_base / temp.length,\n                resalepercent: sum_resale_percent / temp.length,\n                specialbase: sum_special_base / temp.length,\n                specialpercent: sum_special_percent / temp.length,\n                coupon: coupon\n              },\n              filter: filter\n            });\n            console.log('Temp', temp);\n          }\n\n          this.props.addProduct(products);\n          console.log('logs', products);\n        }\n      });\n    }\n  }\n\n  getCategory() {\n    if (this.props.category.length === 0) {\n      fetch('https://blog.weeklyfishclub.com/wp-json/wc/v3/products/categories?hide_empty=false', {\n        method: 'GET',\n        headers: {\n          'Authorization': 'Basic ' + btoa('ck_1c32b3a20592d8658aa6f72350f7843f6e40acce:cs_10dd1b3cf0344130871395eb03936cb5dee5af0c')\n        }\n      }).then(response => response.json()).then(json => {\n        if (json.length > 0) {\n          this.loop(json);\n        } else {}\n      });\n    }\n  }\n\n  setParam(id) {\n    ls.set('productId', id);\n    this.setState({\n      navigate: true\n    });\n  }\n\n  render() {\n    const {\n      navigate\n    } = this.state;\n\n    if (navigate) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/product\",\n        push: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 16\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 20\n      },\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        className: \"themed-container\",\n        fluid: \"sm\",\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: this.props.product.map((products, i) => /*#__PURE__*/_jsxDEV(Col, {\n            sm: \"3\",\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              onClick: () => {\n                this.props.selectProduct(this.props.product[i]);\n                this.setState({\n                  navigate: true\n                });\n              },\n              children: /*#__PURE__*/_jsxDEV(CardBody, {\n                style: {\n                  backgroundColor: \"#f6f6f6\"\n                },\n                children: [products.product.images[0] ? /*#__PURE__*/_jsxDEV(CardImg, {\n                  top: true,\n                  width: \"20%\",\n                  style: {\n                    width: 200,\n                    height: 150\n                  },\n                  src: products.product.images[0].src\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 26\n                }, this), /*#__PURE__*/_jsxDEV(CardTitle, {\n                  tag: \"h5\",\n                  children: [products.product.slug, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 38\n                }, this), this.props.selectProduct.average != undefined ? /*#__PURE__*/_jsxDEV(CardTitle, {\n                  tag: \"h6\",\n                  color: \"blue\",\n                  children: [\"Rs. \", this.props.selectProduct.average.price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 29\n                }, this), \"   \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 23\n              }, this)\n            }, products.product.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 60\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    product: state.product,\n    category: state.category,\n    selectProduct: state.selectProduct\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    addProduct(product) {\n      dispatch(products(product));\n    },\n\n    addCategory(cat) {\n      dispatch(category(cat));\n    },\n\n    selectProduct(product) {\n      dispatch(selectProduct(product));\n    }\n\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","map":{"version":3,"sources":["C:/Users/nms/Desktop/fish/openoms/src/components/Home.js"],"names":["React","Card","CardImg","CardBody","CardTitle","Container","Row","Col","Button","Redirect","SecureLS","connect","products","addtocart","category","addArticle","user","selectProduct","ls","encodingType","fishData","require","token","get","config","Home","Component","constructor","props","state","navigate","componentDidMount","console","log","product","getProduct","getCategory","loop","json","data","a","length","tempData1","b","tempData2","c","id","parent","push","name","splice","addCategory","price_table_data","FormData","append","fetch","method","body","then","response","headers","btoa","i","found","temp","sum_price","sum_expense","sum_retail_base","sum_retail_percent","sum_whole_base","sum_whole_percent","sum_resale_base","sum_resale_percent","sum_special_base","sum_special_percent","product_id","purchase_price","whole_weight","Number","expenses","base_profit_retail","price_percent_profit_retail","base_profit_wholesale","price_percent_profit_wholesale","base_profit_resale","price_percent_profit_resale","base_profit_special","price_percent_profit_special","filter","map","value","ia","sku","Id","coupon","special_price_code","average","total_retail_price","price","expense","retailbase","retailpercent","wholebase","wholepercent","resalebase","resalepercent","specialbase","specialpercent","addProduct","setParam","set","setState","render","marginTop","backgroundColor","images","width","height","src","slug","undefined","mapStateToProps","mapDispatchToProps","dispatch","cat"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Card, CardImg,  CardBody,\r\n  CardTitle, Container,Row,Col,Button} from 'reactstrap';\r\n  import {\r\n    Redirect\r\n  } from \"react-router-dom\";\r\n  import SecureLS from 'secure-ls';\r\n  import { connect } from \"react-redux\";\r\n  import { products, addtocart, category,addArticle,user ,selectProduct} from \"../js/actions/index\";\r\n  var ls = new SecureLS({encodingType: 'aes'});\r\n  var fishData = require('../assets/fishdata.json');\r\n  const token=ls.get('token')\r\n  require('dotenv').config()\r\n   class Home extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        navigate:false,\r\n                    };\r\n    }\r\n    componentDidMount(){\r\n    console.log(this.props.product)\r\n      this.getProduct()\r\n      this.getCategory()\r\n     }\r\n     loop(json){\r\n      let data=[];\r\n      for(var a=0;a<= json.length-1;a++){\r\n        let tempData1=[];\r\n      \r\n              for(var b=0;b<= json.length-1;b++){\r\n                let tempData2=[]\r\n                          for(var c=0;c<= json.length-1;c++){\r\n                                if(json[b].id==json[c].parent){\r\n                                    tempData2.push({  'value':json[c].id,\r\n                                                      'label':json[c].name,\r\n                                                            })\r\n                                      console.log(c,json)\r\n                                }\r\n                              }\r\n                    if(json[a].id==json[b].parent){\r\n                         tempData1.push({ 'value':json[b].id,\r\n                                          'label':json[b].name,\r\n                                          'children':tempData2\r\n                                                })\r\n                          json.splice(b, 1); \r\n                    }\r\n                  }\r\n\r\n        data.push({'value':json[a].id,\r\n                    'label':json[a].name,\r\n                    'children':tempData1,\r\n                    })\r\n        \r\n       }\r\n       //console.log(\"category\",data)\r\n       this.props.addCategory(data)\r\n    }\r\n     \r\n    getProduct(){\r\n      if(this.props.product.length ===0){\r\n     let price_table_data=[];\r\n     let products=[];   \r\n     let data = new FormData();\r\n      data.append('post','getpurchase');\r\n     fetch('https://blog.weeklyfishclub.com/api/create_post', {\r\n        method:'POST', \r\n        body: data\r\n      })\r\n        .then(response => response.json())\r\n        .then(json => {\r\n          if(json[0].length>0){\r\n            price_table_data=json[0];\r\n          \r\n         }\r\n       }); \r\n      fetch('https://blog.weeklyfishclub.com/wp-json/wc/v3/products?per_page=99', {\r\n        method:'GET', \r\n        headers: {'Authorization': 'Basic ' + btoa('ck_1c32b3a20592d8658aa6f72350f7843f6e40acce:cs_10dd1b3cf0344130871395eb03936cb5dee5af0c')}})\r\n        .then(response => response.json())\r\n        .then(json => {\r\n          if(json.length>0){\r\n            for(var i=0;i<=json.length-1;i++){\r\n              var found=0;\r\n              var temp=[];\r\n              let sum_price=0;\r\n              let sum_expense=0;\r\n              let sum_retail_base=0;\r\n              let sum_retail_percent=0;\r\n              let sum_whole_base=0;\r\n              let sum_whole_percent=0;\r\n              let sum_resale_base=0;\r\n              let sum_resale_percent=0;\r\n              let sum_special_base=0;\r\n              let sum_special_percent=0;\r\n              for(var a=0;a<=price_table_data.length-1;a++){\r\n                if(json[i].id == price_table_data[a].product_id){\r\n                  console.log('price table',price_table_data[a])\r\n                   sum_price=           sum_price+(price_table_data[a].purchase_price/price_table_data[a].whole_weight);\r\n                   sum_expense=         sum_expense+Number(price_table_data[a].expenses);\r\n                   sum_retail_base=     sum_retail_base+(Number(price_table_data[a].base_profit_retail));\r\n                   sum_retail_percent=  sum_retail_percent+Number(price_table_data[a].price_percent_profit_retail);\r\n                   sum_whole_base=      sum_whole_base+Number(price_table_data[a].base_profit_wholesale);\r\n                   sum_whole_percent=   sum_whole_percent+Number(price_table_data[a].price_percent_profit_wholesale);\r\n                   sum_resale_base=     sum_resale_base+Number(price_table_data[a].base_profit_resale);\r\n                   sum_resale_percent=  sum_resale_percent+Number(price_table_data[a].price_percent_profit_resale);\r\n                   sum_special_base=    sum_special_base+Number(price_table_data[a].base_profit_special);\r\n                   sum_special_percent= sum_special_percent+Number(price_table_data[a].price_percent_profit_special);\r\n                 \r\n                   temp.push(price_table_data[a])\r\n              //    products.push({product:json[i],price:price_table_data[a]})\r\n              \r\n                  found=found+1;\r\n                }\r\n              }\r\n              var filter={}\r\n              fishData.map((value,ia)=>{\r\n                if(json[i].sku == fishData[ia].Id){\r\n                  filter=fishData[ia]\r\n                }\r\n              })\r\n              \r\n              var coupon='';\r\n              if(temp.length>0){coupon=temp[0].special_price_code}\r\n              products.push({\r\n                product:json[i],\r\n               average:{total_retail_price:(sum_price/temp.length)+(sum_retail_base/temp.length)+(sum_expense/temp.length)+(((sum_price/temp.length)/100)*sum_retail_percent/temp.length),\r\n                          price:sum_price/temp.length,\r\n                          expense:sum_expense/temp.length,\r\n                          retailbase:sum_retail_base/temp.length,\r\n                          retailpercent:sum_retail_percent/temp.length,\r\n                          wholebase:sum_whole_base/temp.length,\r\n                          wholepercent:sum_whole_percent/temp.length,\r\n                          resalebase:sum_resale_base/temp.length,\r\n                          resalepercent:sum_resale_percent/temp.length,\r\n                          specialbase:sum_special_base/temp.length,\r\n                          specialpercent:sum_special_percent/temp.length,\r\n                          coupon:coupon\r\n                         },\r\n               filter:filter\r\n                        })\r\n                         console.log('Temp',temp)\r\n              \r\n            }\r\n            this.props.addProduct(products)\r\n        console.log('logs',products)\r\n          }\r\n        \r\n       });\r\n      }\r\n    }\r\n    getCategory(){\r\n      if(this.props.category.length ===0){\r\n      fetch('https://blog.weeklyfishclub.com/wp-json/wc/v3/products/categories?hide_empty=false', {\r\n        method:'GET', \r\n        headers: {'Authorization': 'Basic ' + btoa('ck_1c32b3a20592d8658aa6f72350f7843f6e40acce:cs_10dd1b3cf0344130871395eb03936cb5dee5af0c')}})\r\n        .then(response => response.json())\r\n        .then(json => {\r\n          if(json.length>0){\r\n            this.loop(json)\r\n          }else{} \r\n        \r\n       });\r\n      }\r\n    }\r\n    setParam(id){\r\n      ls.set('productId',id );\r\n      this.setState({navigate:true})\r\n     \r\n    }\r\n    \r\n    render() {\r\n      const { navigate } = this.state\r\n      if (navigate) {\r\n        return <Redirect to=\"/product\" push={true} />\r\n      }\r\n       return (\r\n          <div style={{marginTop:20}}>\r\n            <Container className=\"themed-container\" fluid=\"sm\" >\r\n                <Row>\r\n                  {this.props.product.map((products,i) =>  <Col sm=\"3\">\r\n                    <Card key={products.product.id} onClick={()=>{this.props.selectProduct(this.props.product[i])\r\n                                                          this.setState({navigate:true})\r\n                                                          }}>\r\n                      <CardBody  style={{backgroundColor: \"#f6f6f6\"}}>\r\n                        {products.product.images[0]?\r\n                      <CardImg  top width=\"20%\" style={{width:200,height:150}} src={products.product.images[0].src}  />\r\n                        :<div></div>}<CardTitle tag=\"h5\" >{products.product.slug} </CardTitle>\r\n                        {this.props.selectProduct.average!=undefined?\r\n                      <CardTitle tag=\"h6\" color=\"blue\">Rs. {this.props.selectProduct.average.price}</CardTitle>\r\n                          : <div></div>}   </CardBody>\r\n                </Card></Col>)}\r\n              </Row>\r\n            </Container>\r\n          </div>\r\n       );\r\n    }\r\n }\r\n\r\n const mapStateToProps = state => {\r\n  return {\r\n    product: state.product,\r\n    category: state.category,\r\n    selectProduct:state.selectProduct\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n     addProduct(product) {\r\n      dispatch(products(product));\r\n    },\r\n    addCategory(cat) {\r\n      dispatch(category(cat));\r\n    },\r\n    selectProduct(product) {\r\n      dispatch(selectProduct(product));\r\n      \r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Home);"]},"metadata":{},"sourceType":"module"}