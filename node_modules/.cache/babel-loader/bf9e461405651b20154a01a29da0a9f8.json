{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nms\\\\Desktop\\\\fish\\\\openoms\\\\src\\\\components\\\\Home.js\";\nimport React from \"react\";\nimport { Card, CardImg, CardBody, CardTitle, Container, Row, Col, Button } from 'reactstrap';\nimport { Redirect } from \"react-router-dom\";\nimport SecureLS from 'secure-ls';\nimport { connect } from \"react-redux\";\nimport background from '../assets/background.jpg';\nimport { products, addtocart, category, addArticle, user, selectProduct } from \"../js/actions/index\";\nimport { image } from './Images';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar ls = new SecureLS({\n  encodingType: 'aes'\n});\n\nvar fishData = require('../assets/fishdata.json');\n\nconst token = ls.get('token');\n\nrequire('dotenv').config();\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      navigate: false\n    };\n  }\n\n  componentDidMount() {\n    console.log(this.props.product);\n    this.getProduct();\n    this.getCategory();\n    console.log(image);\n  }\n  /*  loop(json){\r\n     let data=[];\r\n     for(var a=0;a<= json.length-1;a++){\r\n       let tempData1=[];\r\n     \r\n             for(var b=0;b<= json.length-1;b++){\r\n               let tempData2=[]\r\n                         for(var c=0;c<= json.length-1;c++){\r\n                               if(json[b].id==json[c].parent){\r\n                                   tempData2.push({  'value':json[c].id,\r\n                                                     'label':json[c].name,\r\n                                                           })\r\n                                     console.log(c,json)\r\n                               }\r\n                             }\r\n                   if(json[a].id==json[b].parent){\r\n                        tempData1.push({ 'value':json[b].id,\r\n                                         'label':json[b].name,\r\n                                         'children':tempData2\r\n                                               })\r\n                         json.splice(b, 1); \r\n                   }\r\n                 }\r\n         data.push({'value':json[a].id,\r\n                   'label':json[a].name,\r\n                   'children':tempData1,\r\n                   })\r\n       \r\n      }\r\n      //console.log(\"category\",data)\r\n      this.props.addCategory(data)\r\n   }\r\n  */\n\n\n  getProduct() {\n    if (this.props.product.length === 0) {\n      let price_table_data = [];\n      let products = [];\n      let data = new FormData();\n      data.append('post', 'getpurchase'); //get price table data\n\n      fetch('https://blog.weeklyfishclub.com/api/create_post', {\n        method: 'POST',\n        body: data\n      }).then(response => response.json()).then(json => {\n        if (json[0].length > 0) {\n          price_table_data = json[0];\n        }\n      }); //get Woocommerce product data\n\n      fetch('https://blog.weeklyfishclub.com/wp-json/wc/v3/products?per_page=99', {\n        method: 'GET',\n        headers: {\n          'Authorization': 'Basic ' + btoa('ck_1c32b3a20592d8658aa6f72350f7843f6e40acce:cs_10dd1b3cf0344130871395eb03936cb5dee5af0c')\n        }\n      }).then(response => response.json()).then(json => {\n        if (json.length > 0) {\n          for (var i = 0; i <= json.length - 1; i++) {\n            var found = 0;\n            var temp = [];\n            let sum_price = 0;\n            let sum_expense = 0;\n            let sum_retail_base = 0;\n            let sum_retail_percent = 0;\n            let sum_whole_base = 0;\n            let sum_whole_percent = 0;\n            let sum_resale_base = 0;\n            let sum_resale_percent = 0;\n            let sum_special_base = 0;\n            let sum_special_percent = 0;\n\n            for (var a = 0; a <= price_table_data.length - 1; a++) {\n              if (json[i].id == price_table_data[a].product_id) {\n                console.log('price table', price_table_data[a]);\n                sum_price = sum_price + price_table_data[a].purchase_price / price_table_data[a].whole_weight;\n                sum_expense = sum_expense + Number(price_table_data[a].expenses);\n                sum_retail_base = sum_retail_base + Number(price_table_data[a].base_profit_retail);\n                sum_retail_percent = sum_retail_percent + Number(price_table_data[a].price_percent_profit_retail);\n                sum_whole_base = sum_whole_base + Number(price_table_data[a].base_profit_wholesale);\n                sum_whole_percent = sum_whole_percent + Number(price_table_data[a].price_percent_profit_wholesale);\n                sum_resale_base = sum_resale_base + Number(price_table_data[a].base_profit_resale);\n                sum_resale_percent = sum_resale_percent + Number(price_table_data[a].price_percent_profit_resale);\n                sum_special_base = sum_special_base + Number(price_table_data[a].base_profit_special);\n                sum_special_percent = sum_special_percent + Number(price_table_data[a].price_percent_profit_special);\n                temp.push(price_table_data[a]); //    products.push({product:json[i],price:price_table_data[a]})\n\n                found = found + 1;\n              }\n            }\n\n            var filter = {}; //get JSON FILTERS data\n\n            fishData.map((value, ia) => {\n              if (json[i].sku == fishData[ia].Id) {\n                filter = fishData[ia];\n              }\n            });\n            var coupon = '';\n\n            if (temp.length > 0) {\n              coupon = temp[0].special_price_code;\n            }\n\n            products.push({\n              product: json[i],\n              average: {\n                total_retail_price: sum_price / temp.length + sum_retail_base / temp.length + sum_expense / temp.length + sum_price / temp.length / 100 * sum_retail_percent / temp.length,\n                price: sum_price / temp.length,\n                expense: sum_expense / temp.length,\n                retailbase: sum_retail_base / temp.length,\n                retailpercent: sum_retail_percent / temp.length,\n                wholebase: sum_whole_base / temp.length,\n                wholepercent: sum_whole_percent / temp.length,\n                resalebase: sum_resale_base / temp.length,\n                resalepercent: sum_resale_percent / temp.length,\n                specialbase: sum_special_base / temp.length,\n                specialpercent: sum_special_percent / temp.length,\n                coupon: coupon\n              },\n              filter: filter // image:image[this.props.product[ia].product.sku]\n\n            });\n            console.log('Temp', temp);\n          }\n\n          this.props.addProduct(products);\n          console.log('logs', products);\n        }\n      });\n    }\n  }\n\n  getCategory() {\n    if (this.props.category.length === 0) {\n      //get Woocommerce Category data\n      fetch('https://blog.weeklyfishclub.com/wp-json/wc/v3/products/categories?hide_empty=false', {\n        method: 'GET',\n        headers: {\n          'Authorization': 'Basic ' + btoa('ck_1c32b3a20592d8658aa6f72350f7843f6e40acce:cs_10dd1b3cf0344130871395eb03936cb5dee5af0c')\n        }\n      }).then(response => response.json()).then(json => {\n        if (json.length > 0) {// this.loop(json)\n        } else {}\n      });\n    }\n  }\n\n  setParam(id) {\n    ls.set('productId', id);\n    this.setState({\n      navigate: true\n    });\n  }\n\n  render() {\n    const {\n      navigate\n    } = this.state;\n\n    if (navigate) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/product\",\n        push: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 16\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {},\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        children: this.props.product.map((products, i) => /*#__PURE__*/_jsxDEV(Col, {\n          sm: \"2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 5,\n              border: 0\n            },\n            onClick: () => {\n              this.props.selectProduct(this.props.product[i]);\n              this.setState({\n                navigate: true\n              });\n            },\n            children: /*#__PURE__*/_jsxDEV(CardBody, {\n              style: {\n                border: 'solid',\n                borderWidth: 0.3,\n                borderColor: '#f4f4f4'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                style: {\n                  width: 180,\n                  height: 180\n                },\n                src: image[this.props.product[i].product.sku]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(CardTitle, {\n                tag: \"h5\",\n                style: {\n                  color: '#000'\n                },\n                children: [products.filter.Local_Names, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 24\n              }, this), this.props.selectProduct.average != undefined ? /*#__PURE__*/_jsxDEV(CardTitle, {\n                tag: \"h6\",\n                color: \"blue\",\n                children: [\"Rs. \", this.props.selectProduct.average.price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 29\n              }, this), \"   \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 23\n            }, this)\n          }, products.product.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 76\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    product: state.product,\n    category: state.category,\n    selectProduct: state.selectProduct\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    addProduct(product) {\n      dispatch(products(product));\n    },\n\n    addCategory(cat) {\n      dispatch(category(cat));\n    },\n\n    selectProduct(product) {\n      dispatch(selectProduct(product));\n    }\n\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","map":{"version":3,"sources":["C:/Users/nms/Desktop/fish/openoms/src/components/Home.js"],"names":["React","Card","CardImg","CardBody","CardTitle","Container","Row","Col","Button","Redirect","SecureLS","connect","background","products","addtocart","category","addArticle","user","selectProduct","image","ls","encodingType","fishData","require","token","get","config","Home","Component","constructor","props","state","navigate","componentDidMount","console","log","product","getProduct","getCategory","length","price_table_data","data","FormData","append","fetch","method","body","then","response","json","headers","btoa","i","found","temp","sum_price","sum_expense","sum_retail_base","sum_retail_percent","sum_whole_base","sum_whole_percent","sum_resale_base","sum_resale_percent","sum_special_base","sum_special_percent","a","id","product_id","purchase_price","whole_weight","Number","expenses","base_profit_retail","price_percent_profit_retail","base_profit_wholesale","price_percent_profit_wholesale","base_profit_resale","price_percent_profit_resale","base_profit_special","price_percent_profit_special","push","filter","map","value","ia","sku","Id","coupon","special_price_code","average","total_retail_price","price","expense","retailbase","retailpercent","wholebase","wholepercent","resalebase","resalepercent","specialbase","specialpercent","addProduct","setParam","set","setState","render","marginTop","border","borderWidth","borderColor","width","height","color","Local_Names","undefined","mapStateToProps","mapDispatchToProps","dispatch","addCategory","cat"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,EAAeC,OAAf,EAAyBC,QAAzB,EACEC,SADF,EACaC,SADb,EACuBC,GADvB,EAC2BC,GAD3B,EAC+BC,MAD/B,QAC4C,YAD5C;AAEE,SACEC,QADF,QAEO,kBAFP;AAIA,OAAOC,QAAP,MAAqB,WAArB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,QAA9B,EAAuCC,UAAvC,EAAkDC,IAAlD,EAAwDC,aAAxD,QAA4E,qBAA5E;AACA,SAAQC,KAAR,QAAoB,UAApB;;AACA,IAAIC,EAAE,GAAG,IAAIV,QAAJ,CAAa;AAACW,EAAAA,YAAY,EAAE;AAAf,CAAb,CAAT;;AACA,IAAIC,QAAQ,GAAGC,OAAO,CAAC,yBAAD,CAAtB;;AACA,MAAMC,KAAK,GAACJ,EAAE,CAACK,GAAH,CAAO,OAAP,CAAZ;;AACAF,OAAO,CAAC,QAAD,CAAP,CAAkBG,MAAlB;;AAEC,MAAMC,IAAN,SAAmB3B,KAAK,CAAC4B,SAAzB,CAAmC;AAClCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAC;AADE,KAAb;AAGD;;AACDC,EAAAA,iBAAiB,GAAE;AACnBC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKL,KAAL,CAAWM,OAAvB;AACE,SAAKC,UAAL;AACA,SAAKC,WAAL;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAYhB,KAAZ;AACA;AACH;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEIkB,EAAAA,UAAU,GAAE;AACV,QAAG,KAAKP,KAAL,CAAWM,OAAX,CAAmBG,MAAnB,KAA6B,CAAhC,EAAkC;AACnC,UAAIC,gBAAgB,GAAC,EAArB;AACA,UAAI3B,QAAQ,GAAC,EAAb;AACA,UAAI4B,IAAI,GAAG,IAAIC,QAAJ,EAAX;AACCD,MAAAA,IAAI,CAACE,MAAL,CAAY,MAAZ,EAAmB,aAAnB,EAJkC,CAKlC;;AACDC,MAAAA,KAAK,CAAC,iDAAD,EAAoD;AACtDC,QAAAA,MAAM,EAAC,MAD+C;AAEtDC,QAAAA,IAAI,EAAEL;AAFgD,OAApD,CAAL,CAIIM,IAJJ,CAISC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAJrB,EAKIF,IALJ,CAKSE,IAAI,IAAI;AACZ,YAAGA,IAAI,CAAC,CAAD,CAAJ,CAAQV,MAAR,GAAe,CAAlB,EAAoB;AAClBC,UAAAA,gBAAgB,GAACS,IAAI,CAAC,CAAD,CAArB;AAEF;AACF,OAVH,EANmC,CAiBjC;;AACDL,MAAAA,KAAK,CAAC,oEAAD,EAAuE;AAC1EC,QAAAA,MAAM,EAAC,KADmE;AAE1EK,QAAAA,OAAO,EAAE;AAAC,2BAAiB,WAAWC,IAAI,CAAC,yFAAD;AAAjC;AAFiE,OAAvE,CAAL,CAGGJ,IAHH,CAGQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAHpB,EAIGF,IAJH,CAIQE,IAAI,IAAI;AACZ,YAAGA,IAAI,CAACV,MAAL,GAAY,CAAf,EAAiB;AACf,eAAI,IAAIa,CAAC,GAAC,CAAV,EAAYA,CAAC,IAAEH,IAAI,CAACV,MAAL,GAAY,CAA3B,EAA6Ba,CAAC,EAA9B,EAAiC;AAC/B,gBAAIC,KAAK,GAAC,CAAV;AACA,gBAAIC,IAAI,GAAC,EAAT;AACA,gBAAIC,SAAS,GAAC,CAAd;AACA,gBAAIC,WAAW,GAAC,CAAhB;AACA,gBAAIC,eAAe,GAAC,CAApB;AACA,gBAAIC,kBAAkB,GAAC,CAAvB;AACA,gBAAIC,cAAc,GAAC,CAAnB;AACA,gBAAIC,iBAAiB,GAAC,CAAtB;AACA,gBAAIC,eAAe,GAAC,CAApB;AACA,gBAAIC,kBAAkB,GAAC,CAAvB;AACA,gBAAIC,gBAAgB,GAAC,CAArB;AACA,gBAAIC,mBAAmB,GAAC,CAAxB;;AACA,iBAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,IAAEzB,gBAAgB,CAACD,MAAjB,GAAwB,CAAvC,EAAyC0B,CAAC,EAA1C,EAA6C;AAC3C,kBAAGhB,IAAI,CAACG,CAAD,CAAJ,CAAQc,EAAR,IAAc1B,gBAAgB,CAACyB,CAAD,CAAhB,CAAoBE,UAArC,EAAgD;AAC9CjC,gBAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BK,gBAAgB,CAACyB,CAAD,CAA1C;AACCV,gBAAAA,SAAS,GAAYA,SAAS,GAAEf,gBAAgB,CAACyB,CAAD,CAAhB,CAAoBG,cAApB,GAAmC5B,gBAAgB,CAACyB,CAAD,CAAhB,CAAoBI,YAAvF;AACAb,gBAAAA,WAAW,GAAUA,WAAW,GAACc,MAAM,CAAC9B,gBAAgB,CAACyB,CAAD,CAAhB,CAAoBM,QAArB,CAAvC;AACAd,gBAAAA,eAAe,GAAMA,eAAe,GAAEa,MAAM,CAAC9B,gBAAgB,CAACyB,CAAD,CAAhB,CAAoBO,kBAArB,CAA5C;AACAd,gBAAAA,kBAAkB,GAAGA,kBAAkB,GAACY,MAAM,CAAC9B,gBAAgB,CAACyB,CAAD,CAAhB,CAAoBQ,2BAArB,CAA9C;AACAd,gBAAAA,cAAc,GAAOA,cAAc,GAACW,MAAM,CAAC9B,gBAAgB,CAACyB,CAAD,CAAhB,CAAoBS,qBAArB,CAA1C;AACAd,gBAAAA,iBAAiB,GAAIA,iBAAiB,GAACU,MAAM,CAAC9B,gBAAgB,CAACyB,CAAD,CAAhB,CAAoBU,8BAArB,CAA7C;AACAd,gBAAAA,eAAe,GAAMA,eAAe,GAACS,MAAM,CAAC9B,gBAAgB,CAACyB,CAAD,CAAhB,CAAoBW,kBAArB,CAA3C;AACAd,gBAAAA,kBAAkB,GAAGA,kBAAkB,GAACQ,MAAM,CAAC9B,gBAAgB,CAACyB,CAAD,CAAhB,CAAoBY,2BAArB,CAA9C;AACAd,gBAAAA,gBAAgB,GAAKA,gBAAgB,GAACO,MAAM,CAAC9B,gBAAgB,CAACyB,CAAD,CAAhB,CAAoBa,mBAArB,CAA5C;AACAd,gBAAAA,mBAAmB,GAAEA,mBAAmB,GAACM,MAAM,CAAC9B,gBAAgB,CAACyB,CAAD,CAAhB,CAAoBc,4BAArB,CAA/C;AAEAzB,gBAAAA,IAAI,CAAC0B,IAAL,CAAUxC,gBAAgB,CAACyB,CAAD,CAA1B,EAb6C,CAclD;;AAEIZ,gBAAAA,KAAK,GAACA,KAAK,GAAC,CAAZ;AACD;AACF;;AACD,gBAAI4B,MAAM,GAAC,EAAX,CAjC+B,CAkC7B;;AACF3D,YAAAA,QAAQ,CAAC4D,GAAT,CAAa,CAACC,KAAD,EAAOC,EAAP,KAAY;AACvB,kBAAGnC,IAAI,CAACG,CAAD,CAAJ,CAAQiC,GAAR,IAAe/D,QAAQ,CAAC8D,EAAD,CAAR,CAAaE,EAA/B,EAAkC;AAChCL,gBAAAA,MAAM,GAAC3D,QAAQ,CAAC8D,EAAD,CAAf;AACD;AACF,aAJD;AAMA,gBAAIG,MAAM,GAAC,EAAX;;AACA,gBAAGjC,IAAI,CAACf,MAAL,GAAY,CAAf,EAAiB;AAACgD,cAAAA,MAAM,GAACjC,IAAI,CAAC,CAAD,CAAJ,CAAQkC,kBAAf;AAAkC;;AACpD3E,YAAAA,QAAQ,CAACmE,IAAT,CAAc;AACZ5C,cAAAA,OAAO,EAACa,IAAI,CAACG,CAAD,CADA;AAEbqC,cAAAA,OAAO,EAAC;AAACC,gBAAAA,kBAAkB,EAAEnC,SAAS,GAACD,IAAI,CAACf,MAAhB,GAAyBkB,eAAe,GAACH,IAAI,CAACf,MAA9C,GAAuDiB,WAAW,GAACF,IAAI,CAACf,MAAxE,GAAmFgB,SAAS,GAACD,IAAI,CAACf,MAAhB,GAAwB,GAAzB,GAA8BmB,kBAA9B,GAAiDJ,IAAI,CAACf,MAA3J;AACGoD,gBAAAA,KAAK,EAACpC,SAAS,GAACD,IAAI,CAACf,MADxB;AAEGqD,gBAAAA,OAAO,EAACpC,WAAW,GAACF,IAAI,CAACf,MAF5B;AAGGsD,gBAAAA,UAAU,EAACpC,eAAe,GAACH,IAAI,CAACf,MAHnC;AAIGuD,gBAAAA,aAAa,EAACpC,kBAAkB,GAACJ,IAAI,CAACf,MAJzC;AAKGwD,gBAAAA,SAAS,EAACpC,cAAc,GAACL,IAAI,CAACf,MALjC;AAMGyD,gBAAAA,YAAY,EAACpC,iBAAiB,GAACN,IAAI,CAACf,MANvC;AAOG0D,gBAAAA,UAAU,EAACpC,eAAe,GAACP,IAAI,CAACf,MAPnC;AAQG2D,gBAAAA,aAAa,EAACpC,kBAAkB,GAACR,IAAI,CAACf,MARzC;AASG4D,gBAAAA,WAAW,EAACpC,gBAAgB,GAACT,IAAI,CAACf,MATrC;AAUG6D,gBAAAA,cAAc,EAACpC,mBAAmB,GAACV,IAAI,CAACf,MAV3C;AAWGgD,gBAAAA,MAAM,EAACA;AAXV,eAFK;AAedN,cAAAA,MAAM,EAACA,MAfO,CAgBf;;AAhBe,aAAd;AAkBW/C,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAmBmB,IAAnB;AAEZ;;AACD,eAAKxB,KAAL,CAAWuE,UAAX,CAAsBxF,QAAtB;AACJqB,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAmBtB,QAAnB;AACG;AAEH,OA1EF;AA2EC;AACF;;AACDyB,EAAAA,WAAW,GAAE;AACX,QAAG,KAAKR,KAAL,CAAWf,QAAX,CAAoBwB,MAApB,KAA8B,CAAjC,EAAmC;AAC/B;AACJK,MAAAA,KAAK,CAAC,oFAAD,EAAuF;AAC1FC,QAAAA,MAAM,EAAC,KADmF;AAE1FK,QAAAA,OAAO,EAAE;AAAC,2BAAiB,WAAWC,IAAI,CAAC,yFAAD;AAAjC;AAFiF,OAAvF,CAAL,CAGGJ,IAHH,CAGQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAHpB,EAIGF,IAJH,CAIQE,IAAI,IAAI;AACZ,YAAGA,IAAI,CAACV,MAAL,GAAY,CAAf,EAAiB,CAChB;AACA,SAFD,MAEK,CAAE;AAET,OATF;AAUC;AACF;;AACD+D,EAAAA,QAAQ,CAACpC,EAAD,EAAI;AACV9C,IAAAA,EAAE,CAACmF,GAAH,CAAO,WAAP,EAAmBrC,EAAnB;AACA,SAAKsC,QAAL,CAAc;AAACxE,MAAAA,QAAQ,EAAC;AAAV,KAAd;AAED;;AAEDyE,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEzE,MAAAA;AAAF,QAAe,KAAKD,KAA1B;;AACA,QAAIC,QAAJ,EAAc;AACZ,0BAAO,QAAC,QAAD;AAAU,QAAA,EAAE,EAAC,UAAb;AAAwB,QAAA,IAAI,EAAE;AAA9B;AAAA;AAAA;AAAA;AAAA,cAAP;AACD;;AACA,wBACG;AAAK,MAAA,KAAK,EAAE,EAAZ;AAAA,6BAEM,QAAC,GAAD;AAAA,kBACmB,KAAKF,KAAL,CAAWM,OAAX,CAAmB8C,GAAnB,CAAuB,CAACrE,QAAD,EAAUuC,CAAV,kBAAiB,QAAC,GAAD;AAAK,UAAA,EAAE,EAAC,GAAR;AAAA,iCACvD;AAAK,YAAA,KAAK,EAAE;AAACsD,cAAAA,SAAS,EAAC,CAAX;AAAaC,cAAAA,MAAM,EAAC;AAApB,aAAZ;AAEM,YAAA,OAAO,EAAE,MAAI;AAAC,mBAAK7E,KAAL,CAAWZ,aAAX,CAAyB,KAAKY,KAAL,CAAWM,OAAX,CAAmBgB,CAAnB,CAAzB;AACwB,mBAAKoD,QAAL,CAAc;AAACxE,gBAAAA,QAAQ,EAAC;AAAV,eAAd;AACL,aAJvC;AAAA,mCAKE,QAAC,QAAD;AAAU,cAAA,KAAK,EAAE;AAAC2E,gBAAAA,MAAM,EAAC,OAAR;AAAgBC,gBAAAA,WAAW,EAAC,GAA5B;AAAgCC,gBAAAA,WAAW,EAAC;AAA5C,eAAjB;AAAA,sCACA;AAAM,gBAAA,KAAK,EAAE;AAACC,kBAAAA,KAAK,EAAC,GAAP;AAAWC,kBAAAA,MAAM,EAAC;AAAlB,iBAAb;AAAuC,gBAAA,GAAG,EAAE5F,KAAK,CAAC,KAAKW,KAAL,CAAWM,OAAX,CAAmBgB,CAAnB,EAAsBhB,OAAtB,CAA8BiD,GAA/B;AAAjD;AAAA;AAAA;AAAA;AAAA,sBADA,eAIC,QAAC,SAAD;AAAW,gBAAA,GAAG,EAAC,IAAf;AAAoB,gBAAA,KAAK,EAAE;AAAC2B,kBAAAA,KAAK,EAAC;AAAP,iBAA3B;AAAA,2BAA6CnG,QAAQ,CAACoE,MAAT,CAAgBgC,WAA7D;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJD,EAKG,KAAKnF,KAAL,CAAWZ,aAAX,CAAyBuE,OAAzB,IAAkCyB,SAAlC,gBACH,QAAC,SAAD;AAAW,gBAAA,GAAG,EAAC,IAAf;AAAoB,gBAAA,KAAK,EAAC,MAA1B;AAAA,mCAAsC,KAAKpF,KAAL,CAAWZ,aAAX,CAAyBuE,OAAzB,CAAiCE,KAAvE;AAAA;AAAA;AAAA;AAAA;AAAA,sBADG,gBAEG;AAAA;AAAA;AAAA;AAAA,sBAPN;AAAA;AAAA;AAAA;AAAA;AAAA;AALF,aACW9E,QAAQ,CAACuB,OAAT,CAAiB8B,EAD5B;AAAA;AAAA;AAAA;AAAA;AADuD;AAAA;AAAA;AAAA;AAAA,gBAAxC;AADnB;AAAA;AAAA;AAAA;AAAA;AAFN;AAAA;AAAA;AAAA;AAAA,YADH;AAuBF;;AAhMiC;;AAmMrC,MAAMiD,eAAe,GAAGpF,KAAK,IAAI;AAChC,SAAO;AACLK,IAAAA,OAAO,EAAEL,KAAK,CAACK,OADV;AAELrB,IAAAA,QAAQ,EAAEgB,KAAK,CAAChB,QAFX;AAGLG,IAAAA,aAAa,EAACa,KAAK,CAACb;AAHf,GAAP;AAKD,CANA;;AAQD,MAAMkG,kBAAkB,GAAGC,QAAQ,IAAI;AACrC,SAAO;AACJhB,IAAAA,UAAU,CAACjE,OAAD,EAAU;AACnBiF,MAAAA,QAAQ,CAACxG,QAAQ,CAACuB,OAAD,CAAT,CAAR;AACD,KAHI;;AAILkF,IAAAA,WAAW,CAACC,GAAD,EAAM;AACfF,MAAAA,QAAQ,CAACtG,QAAQ,CAACwG,GAAD,CAAT,CAAR;AACD,KANI;;AAOLrG,IAAAA,aAAa,CAACkB,OAAD,EAAU;AACrBiF,MAAAA,QAAQ,CAACnG,aAAa,CAACkB,OAAD,CAAd,CAAR;AAED;;AAVI,GAAP;AAYD,CAbD;;AAeA,eAAezB,OAAO,CACpBwG,eADoB,EAEpBC,kBAFoB,CAAP,CAGbzF,IAHa,CAAf","sourcesContent":["import React from \"react\";\r\nimport { Card, CardImg,  CardBody,\r\n  CardTitle, Container,Row,Col,Button} from 'reactstrap';\r\n  import {\r\n    Redirect\r\n  } from \"react-router-dom\";\r\n\r\n  import SecureLS from 'secure-ls';\r\n  import { connect } from \"react-redux\";\r\n  import background from '../assets/background.jpg';\r\n  import { products, addtocart, category,addArticle,user ,selectProduct} from \"../js/actions/index\";\r\n  import {image} from './Images';\r\n  var ls = new SecureLS({encodingType: 'aes'});\r\n  var fishData = require('../assets/fishdata.json');\r\n  const token=ls.get('token')\r\n  require('dotenv').config()\r\n\r\n   class Home extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        navigate:false,\r\n                    };\r\n    }\r\n    componentDidMount(){\r\n    console.log(this.props.product)\r\n      this.getProduct()\r\n      this.getCategory()\r\n      console.log(image)\r\n     }\r\n   /*  loop(json){\r\n      let data=[];\r\n      for(var a=0;a<= json.length-1;a++){\r\n        let tempData1=[];\r\n      \r\n              for(var b=0;b<= json.length-1;b++){\r\n                let tempData2=[]\r\n                          for(var c=0;c<= json.length-1;c++){\r\n                                if(json[b].id==json[c].parent){\r\n                                    tempData2.push({  'value':json[c].id,\r\n                                                      'label':json[c].name,\r\n                                                            })\r\n                                      console.log(c,json)\r\n                                }\r\n                              }\r\n                    if(json[a].id==json[b].parent){\r\n                         tempData1.push({ 'value':json[b].id,\r\n                                          'label':json[b].name,\r\n                                          'children':tempData2\r\n                                                })\r\n                          json.splice(b, 1); \r\n                    }\r\n                  }\r\n\r\n        data.push({'value':json[a].id,\r\n                    'label':json[a].name,\r\n                    'children':tempData1,\r\n                    })\r\n        \r\n       }\r\n       //console.log(\"category\",data)\r\n       this.props.addCategory(data)\r\n    }\r\n   */  \r\n    getProduct(){\r\n      if(this.props.product.length ===0){\r\n     let price_table_data=[];\r\n     let products=[];   \r\n     let data = new FormData();\r\n      data.append('post','getpurchase');\r\n      //get price table data\r\n     fetch('https://blog.weeklyfishclub.com/api/create_post', {\r\n        method:'POST', \r\n        body: data\r\n      })\r\n        .then(response => response.json())\r\n        .then(json => {\r\n          if(json[0].length>0){\r\n            price_table_data=json[0];\r\n          \r\n         }\r\n       }); \r\n       //get Woocommerce product data\r\n      fetch('https://blog.weeklyfishclub.com/wp-json/wc/v3/products?per_page=99', {\r\n        method:'GET', \r\n        headers: {'Authorization': 'Basic ' + btoa('ck_1c32b3a20592d8658aa6f72350f7843f6e40acce:cs_10dd1b3cf0344130871395eb03936cb5dee5af0c')}})\r\n        .then(response => response.json())\r\n        .then(json => {\r\n          if(json.length>0){\r\n            for(var i=0;i<=json.length-1;i++){\r\n              var found=0;\r\n              var temp=[];\r\n              let sum_price=0;\r\n              let sum_expense=0;\r\n              let sum_retail_base=0;\r\n              let sum_retail_percent=0;\r\n              let sum_whole_base=0;\r\n              let sum_whole_percent=0;\r\n              let sum_resale_base=0;\r\n              let sum_resale_percent=0;\r\n              let sum_special_base=0;\r\n              let sum_special_percent=0;\r\n              for(var a=0;a<=price_table_data.length-1;a++){\r\n                if(json[i].id == price_table_data[a].product_id){\r\n                  console.log('price table',price_table_data[a])\r\n                   sum_price=           sum_price+(price_table_data[a].purchase_price/price_table_data[a].whole_weight);\r\n                   sum_expense=         sum_expense+Number(price_table_data[a].expenses);\r\n                   sum_retail_base=     sum_retail_base+(Number(price_table_data[a].base_profit_retail));\r\n                   sum_retail_percent=  sum_retail_percent+Number(price_table_data[a].price_percent_profit_retail);\r\n                   sum_whole_base=      sum_whole_base+Number(price_table_data[a].base_profit_wholesale);\r\n                   sum_whole_percent=   sum_whole_percent+Number(price_table_data[a].price_percent_profit_wholesale);\r\n                   sum_resale_base=     sum_resale_base+Number(price_table_data[a].base_profit_resale);\r\n                   sum_resale_percent=  sum_resale_percent+Number(price_table_data[a].price_percent_profit_resale);\r\n                   sum_special_base=    sum_special_base+Number(price_table_data[a].base_profit_special);\r\n                   sum_special_percent= sum_special_percent+Number(price_table_data[a].price_percent_profit_special);\r\n                 \r\n                   temp.push(price_table_data[a])\r\n              //    products.push({product:json[i],price:price_table_data[a]})\r\n              \r\n                  found=found+1;\r\n                }\r\n              }\r\n              var filter={}\r\n                //get JSON FILTERS data\r\n              fishData.map((value,ia)=>{\r\n                if(json[i].sku == fishData[ia].Id){\r\n                  filter=fishData[ia]\r\n                }\r\n              })\r\n              \r\n              var coupon='';\r\n              if(temp.length>0){coupon=temp[0].special_price_code}\r\n              products.push({\r\n                product:json[i],\r\n               average:{total_retail_price:(sum_price/temp.length)+(sum_retail_base/temp.length)+(sum_expense/temp.length)+(((sum_price/temp.length)/100)*sum_retail_percent/temp.length),\r\n                          price:sum_price/temp.length,\r\n                          expense:sum_expense/temp.length,\r\n                          retailbase:sum_retail_base/temp.length,\r\n                          retailpercent:sum_retail_percent/temp.length,\r\n                          wholebase:sum_whole_base/temp.length,\r\n                          wholepercent:sum_whole_percent/temp.length,\r\n                          resalebase:sum_resale_base/temp.length,\r\n                          resalepercent:sum_resale_percent/temp.length,\r\n                          specialbase:sum_special_base/temp.length,\r\n                          specialpercent:sum_special_percent/temp.length,\r\n                          coupon:coupon\r\n              },\r\n              filter:filter,\r\n             // image:image[this.props.product[ia].product.sku]\r\n               })\r\n                         console.log('Temp',temp)\r\n              \r\n            }\r\n            this.props.addProduct(products)\r\n        console.log('logs',products)\r\n          }\r\n        \r\n       });\r\n      }\r\n    }\r\n    getCategory(){\r\n      if(this.props.category.length ===0){\r\n          //get Woocommerce Category data\r\n      fetch('https://blog.weeklyfishclub.com/wp-json/wc/v3/products/categories?hide_empty=false', {\r\n        method:'GET', \r\n        headers: {'Authorization': 'Basic ' + btoa('ck_1c32b3a20592d8658aa6f72350f7843f6e40acce:cs_10dd1b3cf0344130871395eb03936cb5dee5af0c')}})\r\n        .then(response => response.json())\r\n        .then(json => {\r\n          if(json.length>0){\r\n           // this.loop(json)\r\n          }else{} \r\n        \r\n       });\r\n      }\r\n    }\r\n    setParam(id){\r\n      ls.set('productId',id );\r\n      this.setState({navigate:true})\r\n     \r\n    }\r\n \r\n    render() {\r\n      const { navigate } = this.state\r\n      if (navigate) {\r\n        return <Redirect to=\"/product\" push={true} />\r\n      }\r\n       return (\r\n          <div style={{}}>\r\n            \r\n                <Row>\r\n                                  {this.props.product.map((products,i) =>  <Col sm=\"2\">\r\n                    <div style={{marginTop:5,border:0}} \r\n                          key={products.product.id}\r\n                          onClick={()=>{this.props.selectProduct(this.props.product[i])\r\n                                                                this.setState({navigate:true})\r\n                                                          }}>\r\n                      <CardBody style={{border:'solid',borderWidth:0.3,borderColor:'#f4f4f4'}}>\r\n                      <img  style={{width:180,height:180}}   src={image[this.props.product[i].product.sku]}  />\r\n                       \r\n                      \r\n                       <CardTitle tag=\"h5\" style={{color:'#000'}} >{products.filter.Local_Names} </CardTitle>\r\n                        {this.props.selectProduct.average!=undefined?\r\n                      <CardTitle tag=\"h6\" color=\"blue\">Rs. {this.props.selectProduct.average.price}</CardTitle>\r\n                          : <div></div>}   </CardBody>\r\n                </div></Col>)}\r\n              </Row>\r\n            \r\n          </div>\r\n       );\r\n    }\r\n }\r\n\r\n const mapStateToProps = state => {\r\n  return {\r\n    product: state.product,\r\n    category: state.category,\r\n    selectProduct:state.selectProduct\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n     addProduct(product) {\r\n      dispatch(products(product));\r\n    },\r\n    addCategory(cat) {\r\n      dispatch(category(cat));\r\n    },\r\n    selectProduct(product) {\r\n      dispatch(selectProduct(product));\r\n      \r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Home);"]},"metadata":{},"sourceType":"module"}